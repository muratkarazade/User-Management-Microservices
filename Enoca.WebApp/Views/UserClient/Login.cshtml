@{
    ViewData["Title"] = "Login";
}

<h2>Login</h2>

<form asp-action="Login" method="post">
    <div class="form-group">
        <label for="username">Kullanıcı Adı:</label>
        <input type="text" class="form-control" id="username" name="username" required>
    </div>
    <div class="form-group">
        <label for="password">Şifre:</label>
        <input type="password" class="form-control" id="password" name="password" required>
    </div>
    <button type="submit" class="btn btn-primary p-3">Giriş</button>
    @if (ViewData.ModelState.ContainsKey("LoginFailed"))
    {
        <div class="alert alert-danger mt-5">@ViewData.ModelState["LoginFailed"].Errors.First().ErrorMessage</div>
    }
</form>


@*
@section Scripts {
    <script>
        $("form").on("submit", function (event) {
            event.preventDefault();
            var username = $("#username").val();
            var password = $("#password").val();

            $.ajax({
                type: "POST",
                url: "/api/UserManagement/Login",
                contentType: "application/json",
                data: JSON.stringify({ username: username, password: password }),
                success: function (data) {
                    if (data.isSuccess) {
                        sessionStorage.setItem("username", data.user.name);
                        sessionStorage.setItem("userId", data.user.id);
                        window.location.href = "/UserManagement/Details/" + data.user.id;
                    } else {
                        $(".alert").remove();
                        $("form").append('<div class="alert alert-danger mt-3">Kullanıcı adı veya şifre geçersiz.</div>');
                    }
                }
            });
        });
    </script>
}
*@